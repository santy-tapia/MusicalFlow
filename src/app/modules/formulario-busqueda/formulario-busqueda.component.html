<div class="row my-5">
  <div class="col d-grid text-center">
    <h3 class="display-3 text-white">Busqueda Detallada</h3>
  </div>
</div>
<div class="row" class="m-3">
  <form [formGroup]="frmBusqueda" (ngSubmit)="buscar()">
    <div class="form-group">
      <label for="nombre">Nombre</label>
      <input
        type="text"
        class="form-control"
        formControlName="q"
        name="q"
        placeholder="Nombre"
      />
    </div>
    <div class="form-group">
      <label for="apellidos">Mercado</label>
      <select
        name="markets"
        formControlName="market"
        class="select custom-select form-control"
      >
        @for(option of this.market; track $index){
        <option value="{{ option[0] }}">{{ option[1] }}</option>
        }
      </select>
    </div>
    <div class="form-group">
      <label for="limit" class="text-white fw-light display-6 my-2 fs-5"
        >Número de Resultados</label
      >
      <input
        type="number"
        min="5"
        class="form-control rounded-0"
        formControlName="limit"
        name="limit"
        value="5"
      />
    </div>
    <div class="form-group">
      <label for="offset" class="text-white fw-light display-6 my-2 fs-5"
        >Desplazamiento</label
      >
      <input
        type="number"
        class="form-control rounded-0"
        min="0"
        formControlName="offset"
        name="offset"
        value="0"
      />
      <div class="row">
        <div class="col-6">
          <a
            [routerLink]="['/busqueda']"
            class="btn btn-secondary rounded-0 my-2"
            >Volver</a
          >
        </div>
        <div class="col-6 justify-content-end d-grid">
          <input
            type="submit"
            class="btn btn-dark rounded-0 my-2"
            value="Buscar"
            [disabled]="frmBusqueda.invalid"
          />
        </div>
      </div>

      <!--
 <form>
    <div class="form-group">
      <label for="name" class="text-white fw-light display-6 my-2 fs-5">Nombre</label>
      <input
        type="text"
        #name
        class="form-control rounded-0"
        required
        [(ngModel)]="this.q"
        name="name"
        placeholder="Nombre del Empleado"
      />
    </div>
    <div class="form-group">
      <label for="market" class="text-white fw-light display-6 my-2 fs-5">Mercado</label>
      <select id="market"  name="market" #markets class="form-select rounded-0 select" [(ngModel)]="this.market.values">
        @for(option of this.market; track $index){
          <option value="{{option[0]}}">{{option[1]}}</option>
        }
      </select>
    </div>
    <div class="form-group">
      <label for="limit" class="text-white fw-light display-6 my-2 fs-5">Número de Resultados</label>
      <input
        type="number"
        min="5"
        class="form-control rounded-0"
        [(ngModel)]="this.limit"
        name="limit"
        value="5"
      />
    </div>
    <div class="form-group">
      <label for="offset" class="text-white fw-light display-6 my-2 fs-5">Desplazamiento</label>
      <input
        type="number"
        class="form-control rounded-0"
        min="0"
        [(ngModel)]="this.offset"
        name="offset"
        value="0"
      />
    </div>
    <div class="row">
      <div class="col-6   ">
        <a [routerLink]="['/busqueda']" class="btn btn-outline-secondary rounded-0 my-2">Volver</a>
      </div>
      <div class="col-6 justify-content-end d-grid">
         <input type="submit" class="btn btn-outline-success rounded-0 my-2" value="Buscar" (click)="buscar(name.value, markets.value,limit,offset)" />
      </div>
    </div>
  </form>
  -->
      <hr />
    </div>
    <div class="row">
      @for (artista of artistas?.items; track $index) {
      <div class="col-lg-4 col-md-5 col-xl-3 my-3">
        <div class="card m-2 spotifycards rounded-2 border border-0">
          <a [routerLink]="['/artista', artista.id]">
            <img
              style="height: 300px"
              class="card-img-top rounded-top-2"
              [src]="
                artista.images
                  | imageURL
                    : 'https://upload.wikimedia.org/wikipedia/commons/b/b9/No_photo_%282067963%29_-_The_Noun_Project.svg'
              "
              alt="{{ 'Imagen del artista ' + artista.name }}"
            />
          </a>
          <div class="card-body rounded-bottom-2 bg-dark text-white py-4">
            <a
              class="link-offset-2 link-underline link-underline-opacity-0"
              [routerLink]="['/artista', artista.id]"
            >
              <h5 class="card-title text-white">{{ artista.name }}</h5>
            </a>
            <span class="badge badge-pill ml-1">
              {{ artista.followers.total }} seguidores
            </span>
          </div>
        </div>
      </div>
      }
      <!--
         }@empty {
      @if(name){
    <div class="alert alert-info m-3">No hay artistas</div>
    } }

    --></div>
  </form>
</div>
